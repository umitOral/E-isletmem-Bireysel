<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head.ejs') %>

        <link rel="stylesheet" href="/css/payments.css">

</head>

<body>
    <%- include("partials/aside.ejs") %>


        <!---------- left aside ------------->
        <section id="content">
            <%- include('partials/header.ejs') %>
                <main>
                    <div class="main-header">
                        <h1> Kasa</h1>
                    </div>
                    <div class="payments-filter">
                        <form class="payment-form" action="">
                            <div class="inputs">Başlangıç tarihi:
                                <input type="date" name="startDate" class="startDate">
                            </div>
                            <div class="inputs">Bitiş tarihi:
                                <input type="date" name="endDate" class="endDate">
                            </div>

                            <button class="buttons payments-filter-button">Listele</button>

                        </form>

                    </div>
                    <div class="add-payments-button">
                        <button class="buttons payments-add-button">Ödeme Ekle+</button>
                        <button class="buttons expenses-add-button">Masraf Ekle-</button>
                    </div>
                    <div class="print">

                        <span class="material-symbols-sharp print-icon" title="yazdır"> print</span>
                        <div class="print-selection">
                            <label>Yazdır&nbsp; &#10140</label>
                            <label for="" class="to_pdf">PDF<span
                                    class="material-symbols-sharp">picture_as_pdf</span></label>

                            <label for="" class="to_xlsx">XLSX<span
                                    class="material-symbols-sharp">description</span></label>
                        </div>

                    </div>

                    <div class="table-wrapper">
                        <table id="payments_table">
                            <thead>
                                <tr>
                                    <th>Tarih//Saat<i class="fa-solid fa-arrow-up"></i></th>
                                    <th>Not</th>
                                    <th>Müşteri<i class="fa-solid fa-arrow-up"></i></th>
                                    <th>Ödeme Şekli<i class="fa-solid fa-arrow-up"></i></th>
                                    <th>Tutar<i class="fa-solid fa-arrow-up"></i></th>
                                </tr>
                            </thead>


                            <tbody>

                            </tbody>



                            <tfoot>
                                <tr>
                                    <td></td>
                                    <td colspan="2">Toplam Ciro:</td>
                                    <td class="total-income">
                                        <%= totalIncome%>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td colspan="2">Toplam Gider:</td>
                                    <td class="total-expenses">
                                        <%= totalExpenses %>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td colspan="2">Toplam Nakit:</td>
                                    <td class="total-cash">
                                        <%=totalCash%>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td colspan="2">Toplam Kredi Kartı:</td>
                                    <td class="total-crediTCard">
                                        <%=totalCreditCard%>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td colspan="2">Net Kasa </td>
                                    <td class="netCash">
                                        <%=netCash%>
                                    </td>
                                </tr>
                            </tfoot>

                            </tbody>
                        </table>
                    </div>

                    <div class="modal modal_payment">
                        <h2>Ödeme Ekle</h2>
                        <form action="./payments/addPayment" id="add_payment" method="POST">
                            <div class="inputs">
                                Hasta:
                                <select name="fromUser" id="fromUser" class="inputs" required>
                                    <option value="" selected disable hidden> Hasta seçiniz</option>
                                    <% users.forEach(user=> { %>
                                        <option value="<%= user._id %>">
                                            <%= user.name %>
                                                <%= user.surname %>
                                        </option>
                                        <% }) %>

                                </select>
                            </div>
                            <div class="inputs">
                                İşlem:
                                <select name="" id="operations_select">
                                    <option value="" selected hidden disabled>Müşteri seçiniz.</option>
                                </select>
                            </div>
                            <!-- <div class="inputs">
                                Ürün:
                                <input type="text" placeholder="Ürün okutunuz">
                            </div> -->


                            <div class="selected_proccess_type_add">
                                <table class="selected_proccess_table">
                                    <thead>
                                        <td>Ürün/Hizmet</td>
                                        <td>Adet</td>
                                        <td>Ödenen/Fiyat</td>
                                        <td>Ödenecek Tutar</td>


                                    </thead>
                                    <tbody>


                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td>toplam:</td>
                                            <td id="total_value"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>



                            <div class="payment_options ">
                                <span>Tahsilat:</span>
                                <div>
                                    <input type="radio" id="credit_card_ratio" name="cashOrCard" value="Kredi Kartı"
                                        required>
                                      <label for="credit_card_ratio">Kredi Kartı</label>
                                </div>
                                <div>
                                    <input type="radio" id="cash_ratio" name="cashOrCard" value="Nakit">
                                      <label for="cash_ratio">Nakit</label>
                                </div>
                                <div>
                                    <label for="description">Notlar:</label>
                                    <textarea name="description" id="" cols="10" rows="3"></textarea>
                                     
                                </div>

                            </div>

                            <button type="submit" class="save_button">Kaydet</button>
                            <button type="button" class="cancel_button">Vazgeç</button>


                        </form>
                    </div>
                    <div class="modal expenses_payment">
                        <h2>Masraf Ekle</h2>
                        <form action="./payments/addExpense" method="POST">


                            <div class="inputs ">
                                <span>Masraf Miktarı:</span>
                                <input type="number" name="totalPrice" class="totalExpenseValue" id="" required>
                            </div>

                            <div class="payment_options ">
                                <span>Tahsilat:</span>
                                <div>
                                    <input type="radio" id="expense_credit_card_ratio" name="cashOrCard"
                                        value="Kredi Kartı">
                                      <label for="expense_credit_card_ratio">Kredi Kartı</label>
                                </div>
                                <div>
                                    <input type="radio" id="expense_cash_ratio_ratio" name="cashOrCard" value="Nakit">
                                      <label for="expense_cash_ratio">Nakit</label>
                                </div>
                                <div>
                                    <label for="description">Notlar:</label>
                                    <textarea name="description" id="" cols="10" rows="3"></textarea>
                                     
                                </div>

                            </div>

                            <button type="submit" class="save_button">Kaydet</button>
                            <button class="cancel_button" type="button">Vazgeç</button>


                        </form>
                    </div>
                    <div class="modal modal_edit_payment">
                        <h2>Ödeme Düzenle</h2>
                        <form action="" method="POST" id="edit-payment-form">
                            <div class="inputs" id="payment_user_edit">
                                <input type="text" value="aaa" readonly>
                            </div>

                            <div class="selected_proccess_type_add_edit">
                                <table class="selected_proccess_table_edit">
                                    <thead>
                                        <td>Ürün/Hizmet</td>
                                        <td>Adet</td>
                                        <td>T.Ödenen/Fiyat</td>
                                        <td>Ödenen Tutar</td>
                                    </thead>
                                    <tbody>


                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td>toplam:</td>
                                            <td id="total_value_edit"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>

                            <div class="payment_options ">
                                <span>Tahsilat:</span>
                                <div>
                                    <input type="radio" id="credit_card_ratio_edit" name="cashOrCard"
                                        value="Kredi Kartı">
                                      <label for="credit_card_ratio_edit">Kredi Kartı</label>
                                </div>
                                <div>
                                    <input type="radio" id="cash_ratio_edit" name="cashOrCard" value="Nakit">
                                      <label for="cash_ratio_edit">Nakit</label>
                                </div>
                            </div>

                            <div class="inputs">
                                <label for="description">Notlar:</label>
                                <textarea name="description" id="description_for_edit" cols="10" rows="3"></textarea>
                                 
                            </div>
                            <button type="submit" class="save_update_btn">Kaydet</button>
                            <button class="cancel_button">Vazgeç</button>


                        </form>
                    </div>


                </main>
        </section>
        <div class="information-modal"></div>


        <!----------- end of sidebar ----------->






        <script type="module" src="../js/requests.js"></script>
        <script type="module" src="../js/payments.js"></script>
        <script type="module" src="../js/inner_modules/tables.js"></script>
        <script type="module" src="../js/inner_modules/print.js"></script>
        <script src="/js/sidebar.js"></script>




</body>

</html>