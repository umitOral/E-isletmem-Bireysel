<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head.ejs') %>
        <link rel="stylesheet" href="/css/indexAdmin.css">

</head>

<body>
    <%- include('partials/aside.ejs') %>

        <section id="content">


            <%- include('partials/header.ejs') %>

                <!----------- end of sidebar ----------->

                <main>
                    <h1>Ana Sayfa</h1>
                    <div class="search">
                        <form autocomplete="off" id="search-user" action="./admin/users/findSingleUser">
                            <div class="autocomplete inputs">
                                <input id="userName" type="text" name="userName" placeholder="İsim Soyisim">
                                <input id="userPhone" type="text" name="userPhone" placeholder="Telefon">

                                <input type="submit" value="Ara">
                            </div>

                        </form>


                    </div>
                    <div class="insights">
                        <div id="appointments">

                            <h2>
                                <%= new Date().toLocaleDateString() %>
                            </h2>

                            <hr>
                            <div class="appointments-of-doctor">


                            </div>


                        </div>
                        <div id="operations">
                            <h2>İşlemler:</h2>

                            <hr>
                            <div class="centered_div">
                                <button class="add btn" id="add_operation_modal">İşlem Ekle+</button>
                            </div>
                            <div id="operations_content"></div>
                        </div>
                        <div class="old_operations">
                            <h2>Eski İşlemler:</h2>
                            <hr>
                            <div class="centered_div">
                                <button class="add btn" id="old_operation">Bütün İşlemler</button>
                            </div>

                            <div id="old_operations_content">
                                <table>
                                    <thead>
                                        <tr>
                                            <td>İşlem</td>
                                            <td>Tarih</td>
                                            <td>Durum</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>

                                </table>
                            </div>

                        </div>


                    </div>
                </main>

                <div class="modal modal_add_operation">

                    <h2>İşlem Ekle</h2>

                    <form action="./addOperation" id="add_operation_form" onsubmit="return false" method="POST"
                        enctype="multipart/form-data">


                        <div>
                            <span>İşlem:</span>
                            <select class="service_type_add">

                                <option value="" selected disabled hidden>İşlem seçiniz</option>
                                <% locals.company.services.forEach(element=> { %>
                                    <% if (element.activeorNot===true) { %>
                                        <option data-price="<%= element.servicePrice %>" value="<%= element._id %>">
                                            <%= element.serviceName %>
                                        </option>
                                        <% } %>
                                            <% }) %>
                            </select>


                            <div class="selected_proccess_type_add">
                                <table id="selected_proccess_table">
                                    <thead>
                                        <td>Hizmet</td>
                                        <td>Seans Sayısı</td>
                                        <td>Fiyat</td>
                                    </thead>

                                    <tbody>
                                    </tbody>
                                    <tfoot>

                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td>Yüzde İndirimi: <input type="number" id="percent_discount"></td>

                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td>toplam:</td>
                                            <td id="total_value"></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                            <div class="processes_datas inputs">

                            </div>

                        </div>


                        <button type="submit" id="add_operation">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>
                </div>
                <div class="modal add-data-modal">
                    <form action="" id="add-data-form" data-operationid="" data-sessionid="" data-dataid="">
                        <div>
                            <h2>Seansa Veri Ekle</h2>
                        </div>
                        <div class="inputs">Veri Adı:
                            <select name="datas" id="datas_select_input">
                                <% locals.company.serviceDatas.forEach(element=> { %>
                                    <option value="<%= element._id %>">
                                        <%= element.dataName %>
                                    </option>

                                    <% }) %>
                            </select>

                            Opsiyon:
                            <select name="datasOption" id="datasOptions_select_input">
                                <% locals.company.serviceDatas[0].dataOptions.forEach(element=> { %>
                                    <option value="">
                                        <%= element %>
                                    </option>

                                    <% }) %>
                            </select>
                            Sayısal Değer:
                            <input name="dataOptionNumberValue" id="dataOptionNumberValue" type="Number">
                        </div>
                        <button type="submit" class="save_button" id="add-data-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>


                </div>
                <div class="modal add-dataToOperation-modal">
                    <form action="" id="add-dataToOperation-form" data-operationid="" data-sessionid="" >
                        <div>
                            <h2>İşleme Veri Ekle</h2>
                        </div>
                        <div class="inputs">Veri Adı:
                            <select name="datas" id="datas_select_input2">
                                <% locals.company.serviceDatas.forEach(element=> { %>
                                    <option value="<%= element._id %>">
                                        <%= element.dataName %>
                                    </option>
                                    <% }) %>
                            </select>

                            Opsiyon:
                            <select name="datasOption" id="datasOptions_select_input2">
                                <% locals.company.serviceDatas[0].dataOptions.forEach(element=> { %>
                                    <option value="">
                                        <%= element %>
                                    </option>

                                    <% }) %>
                            </select>
                            Sayısal Değer:
                            <input name="dataOptionNumberValue" class="dataOptionNumberValue" type="Number">
                        </div>
                        <button type="submit" class="save_button" id="add-dataToOperation-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>


                </div>
                <div class="modal edit-data-modal">
                    <form action="" id="edit-data-form" data-dataid="" data-operationid="">
                        <div>
                            <h2>Seans Verisi düzenle</h2>
                        </div>
                        <div class="inputs">Veri Adı:
                            <input type="text" name="dataNameEdit" id="dataNameEdit" value="" readonly="">
                        </div>
                        <div class="inputs">Opsiyon:
                            <select name="edit_data_option" id="edit_data_option"></select>
                            <option value=""></option>
                        </div>
                        <button type="submit" class="save_button" id="edit-data-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>


                </div>
                <div class="modal edit-data-operation-modal">
                    <form action="" id="edit-data-operation-form" data-dataid="" data-operationid="" >
                        <div>
                            <h2>Operasyon Verisi düzenle</h2>
                        </div>
                        <div class="inputs">Veri Adı:
                            <input type="text" name="dataNameEdit" id="operationDataNameEdit" value="" readonly="">
                        </div>
                        <div class="inputs">Opsiyon:
                            <select name="edit_data_option" id="edit_operation_data_option"></select>
                            <option value=""></option>
                        </div>
                        <button type="submit" class="save_button" id="edit-operation-data-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>


                </div>
                <div class="modal add-description-modal">
                    <form action="" id="add-description-form" data-operationid="" data-sessionid="">
                        <div>
                            <h2>Seansa Açıklama Ekle</h2>
                        </div>
                        <div class="inputs">Açıklama:
                            <input type="text" id="add-add-description" name="adddescription">
                            
                        </div>
                        <button type="submit" class="save_button" id="add-description-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>
        
        
                </div>
                <div class="modal add-descriptioToOperation-modal">
                    <form action="" id="add-descriptioToOperation-form" data-operationid="" >
                        <div>
                            <h2>İşleme Açıklama Ekle</h2>
                        </div>
                        <div class="inputs">Açıklama:
                            <input type="text" id="add-add-descriptioToOperation" name="descriptioToOperation">
                            
                        </div>
                        <button type="submit" class="save_button" id="add-descriptioToOperation-save-button">Kaydet</button>
                        <button type="button" class="cancel_button">Vazgeç</button>
                    </form>
        
        
                </div>
                <div class="information-modal"></div>

        </section>
        <script src="/js/sidebar.js"></script>
        <script type="module" src="/js/requests.js"></script>
        <script type="module" src="/js/indexAdmin.js"></script>



</body>

</html>